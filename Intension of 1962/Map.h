#ifndef MAP_H
#define MAP_H

#include "SFML\Graphics.hpp"
#include "SFML\Window.hpp"
#include "SFML\System.hpp"
#include "SFML\Audio.hpp"

#include <iostream>
#include <sstream>
#include <cstdlib>
#include <ctime>


class Map
{
private:

    static const int tilerow = 31;
	static const int tilecolumn = 54;

	unsigned int fromx;
	unsigned int fromy;
	unsigned int tox;
	unsigned int toy;

	unsigned int tilecodex;
	unsigned int tilecodey;

	sf::Texture tilesheettex;
    void inittexture();
    void initsprite();

public:
	Map();
	virtual ~Map();

    float gridsizef;
    unsigned gridsizeu;

    unsigned int tilecode[tilerow][tilecolumn] = {

        //Tilemap 1 - fire exit                                                                         //Tilemap 2 - Elevator

       {00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00          ,00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00          ,00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00          ,00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00 },

       {00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,81,36,34,64, 53,69          ,70,53,65,36,34, 83,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,81,44,42,72, 61,77          ,78,61,73,44,42, 83,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,139, 140,139,140,84,48, 48,54,55,35,37, 34,65,49,66,67, 53,48,93,31,31, 31,01          ,01,31,31,31,94, 48,53,48,54,55, 35,54,55,35,48, 51,52,84,84,84, 00,00,00,00,00, 00,00 },
       {00,00,00,00,85, 02,02,02,87,56, 56,62,63,44,62, 63,73,57,74,75, 61,56,07,10,10, 10,01          ,01,10,10,10,15, 56,61,56,62,63, 43,62,63,43,56, 59,60,02,02,87, 00,00,00,00,00, 00,00 },
       {00,00,00,00,85, 02,02,02,02,20, 21,9,9,9,9, 03,04,03,04,31, 31,31,01,01,01, 01,20              ,21,01,01,01,01, 31,31,31,03,04, 03,04,9,9,9, 31,31,02,02,87, 00,00,00,00,00, 00,00 },
       {00,00,00,00,85, 02,02,02,02,28, 29,24,24,24,24, 25,12,11,12,23, 10,23,01,01,01, 01,28          ,29,01,01,01,01, 23,23,23,11,26, 25,26,24,24,24, 23,23,02,02,87, 00,00,00,00,00, 00,00 },
       {00,00,00,00,85, 02,02,02,87,16, 8,02,133,133,02, 02,139,140,104,105, 02,154,155,05,18, 01,01           ,01,01,17,06,84, 84,84,84,84,02, 02,02,84,84,84, 84,84,02,02,87, 00,00,00,00,00, 00,00 },
       {00,00,00,00,85, 02,02,02,87,16, 8,129,02,02,02, 02,02,87,85,02, 02,162,163,13,26, 01,01           ,01,01,25,14,85, 98,99,02,02,02, 02,02,02,02,106, 107,87,02,02,87, 00,00,00,00,00, 00,00 },
       {00,00,00,00,85, 02,02,02,87,16, 8,137,02,02,02, 02,02,02,129,85, 02,02,87,05,18, 01,07           ,15,01,17,06,129, 02,02,02,02,02, 02,02,02,02,02, 02,119,86,86,87, 00,00,00,00,00, 00,00 },
       {00,00,00,00,85, 02,02,02,87,16, 8,129,02,02,02, 02,02,02,137,85, 02,156,157,13,26, 01,07           ,15,01,25,14,137, 102,103,02,02,02, 02,02,02,02,108, 109,127,00,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,85, 86,86,135,135,05, 06,137,02,02,02, 02,02,135,85,02, 02,164,165,05,18, 01,16          ,8,01,17,06,85, 02,02,02,02,02, 02,02,02,02,02, 02,87,00,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,00,00,81,13, 14,85,02,02,02, 02,02,135,129,85, 02,02,87,13,26, 01,16          ,8,01,25,14,129, 102,103,02,02,02, 02,02,02,02,106, 107,119,00,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,00,00,81,05, 06,112,113,114,115, 116,117,135,137,02, 02,158,159,05,18, 01,05          ,06,01,17,06,137, 02,02,02,96,97, 02,96,97,02,02, 02,127,00,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,00,00,81,13, 14,120,121,122,123, 124,125,02,85,02, 02,166,167,13,26, 01,13          ,14,01,25,14,86, 86,86,86,86,86, 86,86,86,86,86, 86,86,00,00,00, 00,00,00,00,00, 00,00 },

       //Tilemap 2 - Security Room                                                                     //Tilemap 4 - Armory

       {00,00,00,00,00, 00,00,00,81,05, 06,83,00,00,00, 00,00,00,86,86, 86,86,86,00,00, 81,16          ,8,83,00,00,00, 00,00,00,00,00, 02,02,02,02,02, 02,02,02,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,00,00,81,13, 14,83,00,00,00, 00,00,00,00,00, 00,00,00,00,00, 81,16          ,8,83,00,00,00, 00,00,00,00,00, 02,02,02,02,02, 02,02,02,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,85,160,160,05, 06,83,00,00,00, 00,00,00,00,00, 00,00,81,48,68, 53,16          ,8,53,51,52,83, 00,00,00,00,00, 02,02,02,02,02, 02,02,02,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,141,02,87,13, 14,83,00,00,00, 00,00,00,00,00, 00,00,81,56,76, 61,16          ,8,61,59,60,83, 00,00,00,00,00, 02,02,02,02,02, 02,02,02,00,00, 00,00,00,00,00, 00,00 },
       {00,00,00,00,00, 00,141,02,87,07, 15,83,00,00,00, 00,00,00,00,00, 00,00,81,93,31, 31,01          ,01,31,31,94,83, 00,00,00,00,00, 02,02,02,02,02, 02,02,02,35,36, 34,35,48,83,00, 00,00 },
       {00,00,00,00,00, 00,142,02,87,07, 15,83,00,00,00, 00,00,00,00,00, 00,00,81,07,10, 10,01          ,01,10,10,15,83, 00,00,00,00,00, 02,02,02,02,02, 02,02,02,43,44, 42,43,56,83,00, 00,00 },
       {00,00,00,00,00, 00,141,02,87,07, 15,36,35,34,54, 55,36,35,34,48, 51,52,53,07,10, 10,01          ,01,10,10,15,53, 35,65,54,55,36, 35,34,32,33,36, 38,39,53,91,9, 9,9,9,83,00, 00,00 },
       {00,00,00,00,00, 00,85,02,87,07, 15,44,45,42,62, 63,44,45,42,56, 59,60,61,07,10, 10,01          ,01,10,10,15,61, 43,73,62,63,44, 45,42,40,41,44, 46,47,61,16,01, 01,01,01,83,00, 00,00 },
       {00,00,00,00,00, 00,143,02,02,20, 21,31,31,31,31, 03,04,03,04,9, 9,9,9,01,01, 01,20            ,21,01,01,01,9, 9,9,9,03,04, 03,04,9,9,9, 31,31,31,31,20, 21,01,01,83,00, 00,00 },
       {00,00,00,00,00, 00,151,86,86,28, 29,23,23,23,23, 11,12,11,12,24, 01,24,24,01,01, 01,28          ,29,01,01,01,24, 01,24,24,11,12, 11,12,24,01,01, 23,23,23,23,28, 29,01,01,83,00, 00,00 },
       {00,00,00,00,00, 00,00,00,00,85, 02,148,148,02,02, 139,140,131,139,140, 02,139,140,07,10, 10,01        ,01,10,10,15,85, 02,84,84,152,153, 02,110,111,02,02, 148,131,132,16,01, 01,01,01,83,00, 00,00 },
       {00,00,00,00,00, 00,00,00,00,128, 02,96,97,96,97, 02,02,119,135,85, 02,02,87,07,10, 10,01          ,01,10,10,15,85, 02,02,02,02,02, 118,02,02,02,02, 02,02,130,90,24, 24,24,24,83,00, 00,00 },
       {00,00,00,00,00, 00,00,00,00,136, 02,02,02,02,02, 02,02,127,02,148, 86,133,135,95,23, 23,01          ,01,23,23,92,86, 150,149,149,150,149, 126,02,02,96,97, 02,02,138,80,80, 80,80,80,00,00, 00,00 },
       {00,00,00,00,00, 00,00,00,00,86,  86,144,145,146,147, 133,134,02,00,00, 00,00,00,80,80, 80,01          ,01,80,80,80,00, 00,00,00,00,00, 86,86,144,145,146, 147,133,02,00,00, 00,00,00,00,00, 00,00 }
    };

    sf::Sprite sprite[tilerow][tilecolumn];

	//functions
	void update();
	void render(sf::RenderTarget *target,sf::Vector2i playerposgrid);
};

#endif

